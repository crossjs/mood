/*! mood-1.0.0 2014-03-25 21:26:19 */
define("pandora/mood/1.0.0/core",["$","pandora/widget/1.0.0/widget","pandora/class/1.0.0/class","pandora/events/1.0.0/events","pandora/widget/1.0.0/aspect"],function(a,b,c){"use strict";function d(a,b,c){e.getJSON(g.URL,a).done(b).fail(c)}var e=a("$"),f=a("pandora/widget/1.0.0/widget"),g=f.extend({setup:function(){this.data("params",{channel:this.option("channelId"),web_id:this.option("webId"),kind:this.option("kindId")}),this.state(g.STATE.NORMAL)},load:function(){var a=this,b=e.extend({action:"0"},this.data("params"));this.fire("load"),this.state(g.STATE.RECEIVING),d.call(this,b,function(b){a.fire("done","load",b)},function(b,c){a.fire("fail","load",c)})},vote:function(a){var b=this,c=e.extend({action:"1",mood:a+1},this.data("params"));this.fire("vote"),this.state(g.STATE.SENDING),d.call(this,c,function(a){b.fire("done","vote",a)},function(a,c){b.fire("fail","vote",c)})}});g.STATE={ERROR:-1,NORMAL:0,RECEIVING:1,SENDING:2},g.URL="http://hits.17173.com/mood/mood_opb.php?jsonp=?",c.exports=g});